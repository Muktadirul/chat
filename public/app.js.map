{"version":3,"sources":["app/actions.js","app/components/Chat.jsx","app/components/MessageForm.jsx","app/components/MessagesBlock.jsx","app/components/User.jsx","app/container/App.jsx","app/container/ChatWindow.jsx","app/container/ChatsList.jsx","app/container/UsersList.jsx","app/initialize.js","app/reducer.js","app/utils/apiCalls.js"],"names":[],"mappings":"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","file":"public/app.js","sourcesContent":["import {createChat as _createChat, loadChatMessages as _loadChatMessages,\n  getAllUsers, getUserChats} from 'utils/apiCalls';\n\nexport const selectChat = (chatId) => ({\n  type: 'SELECT_CHAT',\n  chatId\n});\n\nexport const addChatMessage = (chatId, message) => ({\n  type: 'ADD_CHAT_MESSAGE',\n  chatId,\n  message\n});\n\nexport const createChat = (username) => {\n  return dispatch => {\n    _createChat(username).then(chat_id => {\n      dispatch({ type: 'ADD_CHAT', chat_id });\n    });\n  };\n};\n\nexport const loadChatMessages = (chatId) => {\n  return dispatch => {\n    _loadChatMessages(chatId).then(chatMessages => {\n      dispatch({ type: 'RECEIVE_CHAT_MESSAGES', chatMessages });\n    });\n  };\n};\n\nexport const initialFetchUsers = () => {\n  return dispatch => {\n    getAllUsers().then(users => {\n      dispatch({ type: 'RECEIVE_USERS', users });\n    });\n  };\n};\n\nexport const initialFetchChats = () => {\n  return dispatch => {\n    getUserChats().then(chats => {\n      dispatch({ type: 'RECEIVE_CHATS', chats});\n    });\n  };\n};\n","import React from 'react';\n\nexport default React.createClass({\n  propTypes: {\n    chatId: React.PropTypes.string.isRequired,\n    selectedChat: React.PropTypes.string.isRequired,\n    onSelect: React.PropTypes.func.isRequired\n  },\n\n  handleClick() {\n    this.props.onSelect(this.props.chatId);\n  },\n\n  render () {\n    const {chatId, selectedChat} = this.props;\n    const className = (chatId === selectedChat) ? 'Chat-selected' : 'Chat';\n\n    return <div className={className} onClick={this.handleClick}>\n      {chatId}\n    </div>;\n  }\n});\n","import React from 'react';\n\nlet ws;\n\nexport default React.createClass({\n  propTypes: {\n    chatId: React.PropTypes.string.isRequired,\n    onMessage: React.PropTypes.func.isRequired\n  },\n\n  componentWillMount() {\n    const onMessage = this.props.onMessage;\n\n    ws = new WebSocket(`ws://127.0.0.1:8888/tornado_chat/${this.props.chatId}/`);\n\n    ws.onmessage = function(e) {\n      onMessage(this.props.chatId, e.data);\n    };\n  },\n\n  handleClick() {\n    const message = this.refs.message.value;\n    ws.send(message);\n    this.refs.message.value = '';\n  },\n\n  render() {\n    return <div className=\"MessageForm\">\n      <input className=\"MessageText\" ref=\"message\" type=\"text\" placeholder=\"Type your text here\" />\n      <button onClick={this.handleClick} />\n    </div>\n  }\n});\n","import React from 'react';\n\nexport default React.createClass({\n  propTypes: {\n    chatMessages: React.PropTypes.array\n  },\n\n  render () {\n    const {chatMessages} = this.props;\n\n    if(chatMessages) {\n      return <div className=\"MessagesBlock\">\n        {chatMessages.map(message => {\n          return <div className=\"Message\">{message.text}</div>\n        })}\n      </div>;\n    }\n    else {\n       return <div className=\"MessagesBlock\">\n         There is no messages\n       </div>\n    }\n  }\n});\n","import React from 'react';\n\nexport default React.createClass({\n  propTypes: {\n    username: React.PropTypes.string.isRequired,\n    onChatCreate: React.PropTypes.func.isRequired\n  },\n\n  handleClick() {\n    this.props.onChatCreate(this.props.username);\n  },\n\n  render () {\n    const {username} = this.props;\n\n    return <div className=\"User\">\n      <div>{username}</div>\n      <button onClick={this.handleClick}>Start chat</button>\n    </div>;\n  }\n});\n","import React from 'react';\nimport {connect} from 'react-redux';\n\nimport ChatsList from './ChatsList';\nimport ChatWindow from './ChatWindow';\nimport UsersList from './UsersList';\n\nconst App = ({selectedChat}) => {\n  return <div className=\"Container\">\n    <ChatsList selectedChat={selectedChat} />\n    <ChatWindow selectedChat={selectedChat} />\n    <UsersList />\n  </div>\n}\n\nconst mapStateToProps = (state) => ({\n  selectedChat: state.selectedChat\n});\n\nexport default connect(mapStateToProps)(App)\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {addChatMessage} from 'actions';\n\nimport MessagesBlock from 'components/MessagesBlock';\nimport MessageForm from 'components/MessageForm';\n\nconst ChatWindow = ({selectedChat, messages, onChatMessage}) => {\n  if(selectedChat) {\n    return <div className=\"ChatWindow\">\n      <MessagesBlock chatMessages={messages[selectedChat]} />\n      <MessageForm chatId={selectedChat} onMessage={onChatMessage} />\n    </div>\n  }\n  else {\n    return <div className=\"ChatWindow-empty\" />\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  messages: state.messages\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  onChatMessage(chatId, message) {\n    dispatch(addChatMessage(chatId, message));\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChatWindow);\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {selectChat, loadChatMessages} from 'actions';\n\nimport Chat from 'components/Chat';\n\nconst ChatList = ({chats, selectedChat, onChatSelect}) => {\n  return <div className=\"ChatList\">\n    {chats.map(chat => {\n      return <Chat chatId={chat.id} selectedChat={selectedChat} onSelect={onChatSelect} key={chat.id} />\n    })}\n  </div>;\n}\n\nconst mapStateToProps = (state) => ({\n  chats: state.chats\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  onChatSelect(chatId) {\n    dispatch(selectChat(chatId));\n    dispatch(loadChatMessages(chatId));\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChatList);\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {createChat} from 'actions';\n\nimport User from 'components/User'\n\nconst UserList = ({users, onChatCreate}) => {\n  return <div className=\"UsersList\">\n    {users.map(user => {\n      return <User username={user.username} onChatCreate={onChatCreate} key={user.username} />;\n    })}\n  </div>;\n}\n\nconst mapStateToProps = (state) => ({\n  users: state.users\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  onChatCreate(username) {\n    dispatch(createChat(username));\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserList);\n","require('es6-promise').polyfill();\nrequire('whatwg-fetch')\n\nimport ReactDOM from 'react-dom';\nimport React from 'react';\nimport {createStore, applyMiddleware} from 'redux';\nimport thunkMiddleware from 'redux-thunk';\nimport {Provider} from 'react-redux';\nimport 'whatwg-fetch';\n\nimport reducer from 'reducer';\nimport App from 'container/App';\n\nimport {initialFetchUsers, initialFetchChats} from 'actions';\n\nconst store = createStore(reducer, applyMiddleware(thunkMiddleware));\n\nstore.dispatch(initialFetchUsers());\nstore.dispatch(initialFetchChats())\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const el = document.createElement('div');\n  el.id = 'app';\n  document.body.appendChild(el);\n  ReactDOM.render(\n    <Provider store={store}>\n      <App />\n    </Provider>,\n    el\n  );\n});\n","const initialState = {\n  users: [{'username': 'first'}, {'username': 'second'}, {'username': 'third'}],\n  chats: [{'id': '1'}, {'id': '2'}, {'id': '3'}],\n  selectedChat: '',\n  messages: {}\n};\n\nexport default function(state = initialState, action) {\n  let messages;\n  switch (action.type) {\n    case 'SELECT_CHAT':\n      return Object.assign({}, state, {selectedChat: action.chatId.toString()});\n    case 'ADD_CHAT_MESSAGE':\n      const chatMessages = Array.from(state.messages[action.chatId]);\n      chatMessages.push(action.message);\n      messages = Object.assign({}, state.messages);\n      messages[action.chatId] = chatMessages;\n      return Object.assign({}, state, { messages });\n    case 'ADD_CHAT':\n      let chats = Array.from(state.chats);\n      chats.push(action.chat_id);\n      return Object.assign({}, state, {chats: chats});\n    case 'RECEIVE_CHAT_MESSAGES':\n      messages = Object.assign({}, state.messages);\n      messages[state.selectedChat] = action.chatMessages;\n      return Object.assign({}, state, { messages });\n    case 'RECEIVE_USERS':\n      return Object.assign({}, state, { users: action.users });\n    case 'RECEIVE_CHATS':\n      return Object.assign({}, state, { chats: action.chats });\n    default:\n      return state;\n  }\n}\n","export const createChat = (username) => {\n  return new Promise((resolve, reject) => {\n    fetch(`http://127.0.0.1:8000/chat/create_chat/?username=${username}`, {\n      method: 'GET',\n      credentials: 'same-origin'\n    })\n    .then(response => {\n      response.json().then(response => resolve(response.chat_id));\n    });\n  });\n};\n\n\nexport const getAllUsers = () => {\n  return new Promise((resolve, reject) => {\n    fetch('http://127.0.0.1:8000/chat/get_all_users', {\n      method: 'GET',\n      credentials: 'same-origin'\n    })\n    .then(response => {\n      response.json().then(response => resolve(response.users));\n    });\n  });\n};\n\n\nexport const getUserChats = () => {\n  return new Promise((resolve, reject) => {\n    fetch('http://127.0.0.1:8000/chat/get_user_chats', {\n      method: 'GET',\n      credentials: 'same-origin'\n    })\n    .then(response => {\n      response.json().then(response => resolve(response.chats));\n    });\n  });\n};\n\n\nexport const loadChatMessages = (chatId) => {\n  return new Promise((resolve, reject) => {\n    fetch(`http://127.0.0.1:8000/chat/load_chat_messages/?chat_id=${chatId}`, {\n      method: 'GET',\n      credentials: 'same-origin'\n    })\n    .then(response => {\n      response.json().then(response => resolve(response.chat_messages));\n    });\n  });\n}\n"]}