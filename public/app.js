!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var t={},r={},n={},a={}.hasOwnProperty,s=/^\.\.?(\/|$)/,c=function(e,t){for(var r,n=[],a=(s.test(t)?e+"/"+t:t).split("/"),c=0,u=a.length;c<u;c++)r=a[c],".."===r?n.pop():"."!==r&&""!==r&&n.push(r);return n.join("/")},u=function(e){return e.split("/").slice(0,-1).join("/")},i=function(t){return function(r){var n=c(u(t),r);return e.require(n,t)}},o=function(e,t){var n=null;n=C&&C.createHot(e);var a={id:e,exports:{},hot:n};return r[e]=a,t(a.exports,i(e),a),a.exports},l=function(e){return n[e]?l(n[e]):e},d=function(e,t){return l(c(u(e),t))},f=function(e,n){null==n&&(n="/");var s=l(e);if(a.call(r,s))return r[s].exports;if(a.call(t,s))return o(s,t[s]);throw new Error("Cannot find module '"+e+"' from '"+n+"'")};f.alias=function(e,t){n[t]=e};var h=/\.[^.\/]+$/,p=/\/index(\.[^\/]+)?$/,m=function(e){if(h.test(e)){var t=e.replace(h,"");a.call(n,t)&&n[t].replace(h,"")!==t+"/index"||(n[t]=e)}if(p.test(e)){var r=e.replace(p,"");a.call(n,r)||(n[r]=e)}};f.register=f.define=function(e,n){if("object"==typeof e)for(var s in e)a.call(e,s)&&f.register(s,e[s]);else t[e]=n,delete r[e],m(e)},f.list=function(){var e=[];for(var r in t)a.call(t,r)&&e.push(r);return e};var C=e._hmr&&new e._hmr(d,f,t,r);f._cache=r,f.hmr=C&&C.wrap,f.brunch=!0,e.require=f}}(),function(){var e;window;require.register("actions.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initialFetchChats=e.initialFetchUsers=e.loadChatMessages=e.createChat=e.selectChat=void 0;var n=t("utils/apiCalls");e.selectChat=function(e){return{type:"SELECT_CHAT",chatId:e}},e.createChat=function(e){return function(t){(0,n.createChat)(e).then(function(e){t({type:"ADD_CHAT",chat_id:e})})}},e.loadChatMessages=function(e){return function(t){(0,n.loadChatMessages)(e).then(function(e){t({type:"RECEIVE_CHAT_MESSAGES",chatMessages:e})})}},e.initialFetchUsers=function(){return function(e){(0,n.getAllUsers)().then(function(t){e({type:"RECEIVE_USERS",users:t})})}},e.initialFetchChats=function(){return function(e){(0,n.getUserChats)().then(function(t){e({type:"RECEIVE_CHATS",chats:t})})}}}),require.register("components/Chat.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),s=n(a);e["default"]=s["default"].createClass({displayName:"Chat",propTypes:{chatId:s["default"].PropTypes.string.isRequired,selectedChat:s["default"].PropTypes.string.isRequired,onSelect:s["default"].PropTypes.func.isRequired},handleClick:function(){this.props.onSelect(this.props.chatId)},render:function(){var e=this.props,t=e.chatId,r=e.selectedChat,n=t===r?"Chat-selected":"Chat";return s["default"].createElement("div",{className:n,onClick:this.handleClick},t)}})}),require.register("components/MessageForm.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),s=n(a),c=void 0;e["default"]=s["default"].createClass({displayName:"MessageForm",propTypes:{chatId:s["default"].PropTypes.string.isRequired},componentWillMount:function(){c=new WebSocket("ws://127.0.0.1:8888/tornado_chat/"+this.props.chatId+"/"),c.onmessage=function(e){alert(e.data)}},handleClick:function(){var e=this.refs.message.value;c.send(e),this.refs.message.value=""},render:function(){return s["default"].createElement("div",{className:"MessageForm"},s["default"].createElement("input",{className:"MessageText",ref:"message",type:"text",placeholder:"Type your text here"}),s["default"].createElement("button",{onClick:this.handleClick}))}})}),require.register("components/MessagesBlock.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),s=n(a);e["default"]=s["default"].createClass({displayName:"MessagesBlock",propTypes:{chatMessages:s["default"].PropTypes.array},render:function(){var e=this.props.chatMessages;return e?s["default"].createElement("div",{className:"MessagesBlock"},e.map(function(e){return s["default"].createElement("div",{className:"Message"},e.text)})):s["default"].createElement("div",{className:"MessagesBlock"},"There is no messages")}})}),require.register("components/User.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),s=n(a);e["default"]=s["default"].createClass({displayName:"User",propTypes:{username:s["default"].PropTypes.string.isRequired,onChatCreate:s["default"].PropTypes.func.isRequired},handleClick:function(){this.props.onChatCreate(this.props.username)},render:function(){var e=this.props.username;return s["default"].createElement("div",{className:"User"},s["default"].createElement("div",null,e),s["default"].createElement("button",{onClick:this.handleClick},"Start chat"))}})}),require.register("container/App.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),s=n(a),c=t("react-redux"),u=t("./ChatsList"),i=n(u),o=t("./ChatWindow"),l=n(o),d=t("./UsersList"),f=n(d),h=function(e){var t=e.selectedChat;return s["default"].createElement("div",{className:"Container"},s["default"].createElement(i["default"],{selectedChat:t}),s["default"].createElement(l["default"],{selectedChat:t}),s["default"].createElement(f["default"],null))},p=function(e){return{selectedChat:e.selectedChat}};e["default"]=(0,c.connect)(p)(h)}),require.register("container/ChatWindow.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),s=n(a),c=t("react-redux"),u=t("components/MessagesBlock"),i=n(u),o=t("components/MessageForm"),l=n(o),d=function(e){var t=e.selectedChat,r=e.messages;return t?s["default"].createElement("div",{className:"ChatWindow"},s["default"].createElement(i["default"],{chatMessages:r[t]}),s["default"].createElement(l["default"],{chatId:t})):s["default"].createElement("div",{className:"ChatWindow-empty"})},f=function(e){return{messages:e.messages}};e["default"]=(0,c.connect)(f)(d)}),require.register("container/ChatsList.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),s=n(a),c=t("react-redux"),u=t("actions"),i=t("components/Chat"),o=n(i),l=function(e){var t=e.chats,r=e.selectedChat,n=e.onChatSelect;return s["default"].createElement("div",{className:"ChatList"},t.map(function(e){return s["default"].createElement(o["default"],{chatId:e.id,selectedChat:r,onSelect:n,key:e.id})}))},d=function(e){return{chats:e.chats}},f=function(e){return{onChatSelect:function(t){e((0,u.selectChat)(t)),e((0,u.loadChatMessages)(t))}}};e["default"]=(0,c.connect)(d,f)(l)}),require.register("container/UsersList.jsx",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),s=n(a),c=t("react-redux"),u=t("actions"),i=t("components/User"),o=n(i),l=function(e){var t=e.users,r=e.onChatCreate;return s["default"].createElement("div",{className:"UsersList"},t.map(function(e){return s["default"].createElement(o["default"],{username:e.username,onChatCreate:r,key:e.username})}))},d=function(e){return{users:e.users}},f=function(e){return{onChatCreate:function(t){e((0,u.createChat)(t))}}};e["default"]=(0,c.connect)(d,f)(l)}),require.register("initialize.js",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=t("react-dom"),s=n(a),c=t("react"),u=n(c),i=t("redux"),o=t("redux-thunk"),l=n(o),d=t("react-redux");t("whatwg-fetch");var f=t("reducer"),h=n(f),p=t("container/App"),m=n(p),C=t("actions");t("es6-promise").polyfill(),t("whatwg-fetch");var _=(0,i.createStore)(h["default"],(0,i.applyMiddleware)(l["default"]));_.dispatch((0,C.initialFetchUsers)()),_.dispatch((0,C.initialFetchChats)()),document.addEventListener("DOMContentLoaded",function(){var e=document.createElement("div");e.id="app",document.body.appendChild(e),s["default"].render(u["default"].createElement(d.Provider,{store:_},u["default"].createElement(m["default"],null)),e)})}),require.register("reducer.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(){var e=arguments.length<=0||void 0===arguments[0]?n:arguments[0],t=arguments[1],r=void 0;switch(t.type){case"SELECT_CHAT":return Object.assign({},e,{selectedChat:t.chatId});case"ADD_CHAT":var a=Array.from(e.chats);return a.push(t.chat_id),Object.assign({},e,{chats:a});case"RECEIVE_CHAT_MESSAGES":return r=Object.assign({},e.messages),r[e.selectedChat]=t.chatMessages,Object.assign({},e,{messages:r});case"RECEIVE_USERS":return Object.assign({},e,{users:t.users});case"RECEIVE_CHATS":return Object.assign({},e,{chats:t.chats});default:return e}};var n={users:[{username:"first"},{username:"second"},{username:"third"}],chats:[{id:"1"},{id:"2"},{id:"3"}],selectedChat:"",messages:{}}}),require.register("utils/apiCalls.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.createChat=function(e){return new Promise(function(t,r){fetch("http://127.0.0.1:8000/chat/create_chat/?username="+e,{method:"GET",credentials:"same-origin"}).then(function(e){e.json().then(function(e){return t(e.chat_id)})})})},e.getAllUsers=function(){return new Promise(function(e,t){fetch("http://127.0.0.1:8000/chat/get_all_users",{method:"GET",credentials:"same-origin"}).then(function(t){t.json().then(function(t){return e(t.users)})})})},e.getUserChats=function(){return new Promise(function(e,t){fetch("http://127.0.0.1:8000/chat/get_user_chats",{method:"GET",credentials:"same-origin"}).then(function(t){t.json().then(function(t){return e(t.chats)})})})},e.loadChatMessages=function(e){return new Promise(function(t,r){fetch("http://127.0.0.1:8000/chat/load_chat_messages/?chat_id="+e,{method:"GET",credentials:"same-origin"}).then(function(e){e.json().then(function(e){return t(e.chat_messages)})})})}}),require.alias("process/browser.js","process"),e=require("process"),require.register("___globals___",function(e,t,r){})}(),require("___globals___");